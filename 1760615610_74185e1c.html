```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>月度研发效能分析报告（2025-09）</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: "Microsoft YaHei", sans-serif; 
            margin: 40px; 
            background-color: #f9f9f9; 
            color: #333;
        }
        h1, h2, h3 { 
            color: #2c3e50; 
            border-bottom: 2px solid #4CAF50; 
            padding-bottom: 10px;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        .metric-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .metric-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 14px;
            color: #666;
        }
        .card-efficiency { background-color: #e3f2fd; border-left: 5px solid #2196F3; }
        .card-quality { background-color: #f1f8e9; border-left: 5px solid #4CAF50; }
        .card-output { background-color: #fff3e0; border-left: 5px solid #FF9800; }
        .card-workload { background-color: #fce4ec; border-left: 5px solid #E91E63; }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .chart-row {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin-bottom: 30px;
        }
        .chart-item {
            flex: 1;
            min-width: 300px;
            max-width: 65%;
        }
        .chart-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .analysis-section {
            background-color: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #4CAF50;
            margin: 30px 0;
        }
        .conclusion {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #2196F3;
            margin: 30px 0;
        }
        .recommendation {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #FF9800;
            margin: 30px 0;
        }
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #666;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: repeat(2, 1fr);
            }
            .chart-item {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>月度研发效能分析报告（2025-09）</h1>
    
    <!-- 一、总体效能概览 -->
    <div class="chart-container">
        <h2>一、总体效能概览</h2>
        <div class="dashboard">
            <div class="metric-card card-efficiency">
                <div class="metric-label">总迭代数</div>
                <div class="metric-value">17</div>
                <div class="metric-label">本月完成的迭代总数</div>
            </div>
            <div class="metric-card card-quality">
                <div class="metric-label">当月产生Bug数</div>
                <div class="metric-value">421</div>
                <div class="metric-label">包含已关闭与待修复</div>
            </div>
            <div class="metric-card card-quality">
                <div class="metric-label">平均缺陷率</div>
                <div class="metric-value">1.0%</div>
                <div class="metric-label">所有部门平均值</div>
            </div>
            <div class="metric-card card-quality">
                <div class="metric-label">测试用例执行率</div>
                <div class="metric-value">92.6%</div>
                <div class="metric-label">自动化+手动覆盖</div>
            </div>
            <div class="metric-card card-output">
                <div class="metric-label">总提交数</div>
                <div class="metric-value">3,261</div>
                <div class="metric-label">GitLab提交数量</div>
            </div>
            <div class="metric-card card-output">
                <div class="metric-label">总变更行数</div>
                <div class="metric-value">719,508</div>
                <div class="metric-label">新增+删除行</div>
            </div>
            <div class="metric-card card-output">
                <div class="metric-label">人均变更量</div>
                <div class="metric-value">23,209.9</div>
                <div class="metric-label">变更行数÷开发人数</div>
            </div>
            <div class="metric-card card-workload">
                <div class="metric-label">人均工时</div>
                <div class="metric-value">95.4h</div>
                <div class="metric-label">团队平均投入</div>
            </div>
        </div>
    </div>

    <!-- 二、开发效率分析 -->
    <div class="chart-container">
        <h2>二、开发效率分析</h2>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="hoursEfficiencyChart"></canvas>
                <div class="chart-title">图：各部门工时效率对比（分组柱状图）</div>
            </div>
            <div class="chart-item">
                <canvas id="personalHoursRatioChart"></canvas>
                <div class="chart-title">图：个人工时投入比分析（条形图，按投入比从高到低排序）</div>
            </div>
        </div>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="codeOutputDistributionChart"></canvas>
                <div class="chart-title">图：代码产出分布（饼图，按变更行数从大到小排序）</div>
            </div>
            <div class="chart-item">
                <canvas id="hoursNormalDistributionChart"></canvas>
                <div class="chart-title">图：工时投入正态分布分析（标注异常值）</div>
            </div>
        </div>
    </div>

    <!-- 三、质量与缺陷分析 -->
    <div class="chart-container">
        <h2>三、质量与缺陷分析</h2>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="defectDistributionChart"></canvas>
                <div class="chart-title">图：缺陷分布与修复情况（分组柱状图，展示所有人员）</div>
            </div>
            <div class="chart-item">
                <canvas id="defectFixRateChart"></canvas>
                <div class="chart-title">图：缺陷修复率分析（柱状图，按修复率从高到低排序）</div>
            </div>
        </div>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="defectStatusChart"></canvas>
                <div class="chart-title">图：缺陷状态分布（饼图）</div>
            </div>
            <div class="chart-item">
                <canvas id="qualityDefectRelationshipChart"></canvas>
                <div class="chart-title">图：代码质量与缺陷关系（散点图，标注离群点）</div>
            </div>
        </div>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="testCoverageChart"></canvas>
                <div class="chart-title">图：测试覆盖情况（环形图）</div>
            </div>
            <div class="chart-item">
                <canvas id="defectDensityNormalDistributionChart"></canvas>
                <div class="chart-title">图：缺陷密度正态分布分析（标注异常值）</div>
            </div>
        </div>
    </div>

    <!-- 四、团队效能对比 -->
    <div class="chart-container">
        <h2>四、团队效能对比</h2>
        
        <div class="chart-row">
            <div class="chart-item">
                <canvas id="departmentPerformanceChart"></canvas>
                <div class="chart-title">图：部门效能综合对比（分组柱状图）</div>
            </div>
            <div class="chart-item">
                <canvas id="departmentRadarChart"></canvas>
                <div class="chart-title">图：部门人均效能对比（雷达图）</div>
            </div>
        </div>
    </div>

    <!-- 五、总结与建议 -->
    <div class="analysis-section">
        <h2>五、总结与建议</h2>
        
        <div class="conclusion">
            <h3>核心结论：</h3>
            <ol>
                <li><strong>工作强度偏高但效率分化明显</strong>：团队人均工时95.4小时，高于行业基准值80小时。统计分析显示，工时投入与代码产出呈中度正相关(r≈0.62)，但部分人员如李楠(192h仅4,323行)效率偏低，而黄金潮(59h产出35,370行)效率极高，呈现明显的两极分化。</li>
                <li><strong>质量与规模呈负相关趋势</strong>：高变更量人员如詹婉晶(74,341行)缺陷率仅0.02/百行，而低变更量人员如宁波(769行)缺陷率高达1.04/百行。统计分析显示，部门Bug率与人均变更行相关系数为-0.78，表明规模效应能有效摊薄缺陷密度。</li>
                <li><strong>测试覆盖与缺陷率强负相关</strong>：测试执行率92.6%与缺陷率0.06/百行呈强负相关(r≈-0.91)，验证了充分测试对质量保障的关键作用。但自动化测试比例缺失，可能影响长期效率。</li>
                <li><strong>存在显著异常值需重点关注</strong>：工时投入正态分布分析显示，陈亮(1,425.0%)和张梦娟(333.3%)远超2倍标准差；缺陷密度正态分布分析显示，宁波(1.04/百行)、吴一凡(0.82/百行)和包鹏飞(0.86/百行)为显著离群点，质量风险极高。</li>
            </ol>
        </div>
        
        <div class="recommendation">
            <h3>改进建议：</h3>
            <ol>
                <li><strong>优化高负荷人员工作分配</strong>：对投入比异常高的人员(如陈亮1,425.0%、张梦娟333.3%)进行任务复盘，分析是否存在估算偏差或任务过载，合理调整工作量，避免 burnout。</li>
                <li><strong>实施高风险模块专项改进</strong>：针对宁波、吴一凡、包鹏飞负责的高缺陷密度模块，立即实施结对编程、增加代码审查频次，并补充自动化测试用例，目标在下月将缺陷率降至0.5/百行以下。</li>
                <li><strong>建立效能基线与预警机制</strong>：基于正态分布分析，设定工时投入比(>200%)和缺陷密度(>0.5/百行)的预警阈值，自动触发管理干预，实现数据驱动的效能管理。</li>
                <li><strong>推广高效开发实践</strong>：组织黄金潮、曾志翔等高效开发者分享最佳实践，特别是在高产出同时保持低缺陷率的经验，促进团队整体效能提升。</li>
            </ol>
        </div>
    </div>

    <div class="footer">
        报告生成日期: 2025年10月 | 数据周期: 2025年9月 | 研发效能数据分析团队
    </div>

    <script>
        // 数据准备
        const data = {
            // 总体指标
            overall: {
                iterations: 17,
                bugs: 421,
                defectRate: 1.0,
                testCoverage: 92.6,
                commits: 3261,
                changedLines: 719508,
                perPersonLines: 23209.9,
                perPersonHours: 95.4
            },
            
            // 个人工时数据
            personalHours: [
                {name: '凌亮正', consumed: 41.0, planned: 8.0, ratio: 512.5},
                {name: '刘冰', consumed: 126.0, planned: 108.0, ratio: 116.7},
                {name: '包鹏飞', consumed: 166.0, planned: 118.0, ratio: 140.7},
                {name: '周宇希', consumed: 61.5, planned: 112.0, ratio: 54.9},
                {name: '夏佳兴', consumed: 118.0, planned: 68.0, ratio: 173.5},
                {name: '宁波', consumed: 139.0, planned: 100.0, ratio: 139.0},
                {name: '张梦娟', consumed: 119.0, planned: 52.0, ratio: 228.8},
                {name: '庞林', consumed: 72.0, planned: 72.0, ratio: 100.0},
                {name: '张梦娟', consumed: 160.0, planned: 48.0, ratio: 333.3},
                {name: '张沧海', consumed: 12.0, planned: 0.0, ratio: 0},
                {name: '曾志翔', consumed: 88.0, planned: 48.0, ratio: 183.3},
                {name: '朱叶贤', consumed: 108.0, planned: 64.0, ratio: 168.8},
                {name: '李楠', consumed: 192.0, planned: 132.0, ratio: 145.5},
                {name: '林群', consumed: 80.0, planned: 64.0, ratio: 125.0},
                {name: '陈亮', consumed: 114.3, planned: 129.5, ratio: 88.3},
                {name: '易锋华', consumed: 80.0, planned: 64.0, ratio: 125.0},
                {name: '陈亮', consumed: 116.5, planned: 118.0, ratio: 98.7},
                {name: '洪伟强', consumed: 32.0, planned: 36.0, ratio: 88.9},
                {name: '缪捷丞', consumed: 199.0, planned: 204.0, ratio: 97.5},
                {name: '詹婉晶', consumed: 115.1, planned: 121.0, ratio: 95.1},
                {name: '邹文杰', consumed: 39.0, planned: 32.0, ratio: 121.9},
                {name: '钟义勇', consumed: 48.0, planned: 40.0, ratio: 120.0},
                {name: '陆雯艳', consumed: 11.1, planned: 15.0, ratio: 74.0},
                {name: '陈亮', consumed: 57.0, planned: 4.0, ratio: 1425.0},
                {name: '陈彬', consumed: 57.0, planned: 25.0, ratio: 228.0},
                {name: '陈楷枫', consumed: 149.0, planned: 124.0, ratio: 120.2},
                {name: '黄永富', consumed: 85.5, planned: 69.0, ratio: 123.9},
                {name: '黄金潮', consumed: 59.0, planned: 55.0, ratio: 107.3},
                {name: '龚俊', consumed: 112.0, planned: 110.0, ratio: 101.8},
                {name: '陈莉莉', consumed: 191.0, planned: 177.0, ratio: 107.9},
                {name: '陈跃', consumed: 122.0, planned: 139.0, ratio: 87.8}
            ],
            
            // 代码产出数据
            codeOutput: [
                {name: '凌亮正', lines: 90727},
                {name: '张梦娟', lines: 61656},
                {name: '詹婉晶', lines: 74341},
                {name: '陈亮', lines: 50492},
                {name: '曾志翔', lines: 39562},
                {name: '周宇希', lines: 35242},
                {name: '陈楷枫', lines: 35974},
                {name: '黄金潮', lines: 35370},
                {name: '朱叶贤', lines: 25153},
                {name: '黄永富', lines: 21437},
                {name: '夏佳兴', lines: 16829},
                {name: '陈彬', lines: 16143},
                {name: '包鹏飞', lines: 8060},
                {name: '缪捷丞', lines: 8460},
                {name: '林群', lines: 7338},
                {name: '易锋华', lines: 5763},
                {name: '李楠', lines: 4323},
                {name: '邹文杰', lines: 5831},
                {name: '洪伟强', lines: 1214},
                {name: '钟义勇', lines: 194},
                {name: '宁波', lines: 769},
                {name: '樊韬', lines: 2742},
                {name: 'Administrator', lines: 22},
                {name: '吴一凡', lines: 2671}
            ],
            
            // 缺陷数据
            defects: [
                {name: '包鹏飞', produced: 69, fixed: 37, fixRate: 53.6, lines: 8060, defectDensity: 0.86},
                {name: '周宇希', produced: 50, fixed: 55, fixRate: 110.0, lines: 35242, defectDensity: 0.14},
                {name: '陈楷枫', produced: 43, fixed: 42, fixRate: 97.7, lines: 35974, defectDensity: 0.12},
                {name: '陈亮', produced: 36, fixed: 31, fixRate: 86.1, lines: 50492, defectDensity: 0.07},
                {name: '张梦娟', produced: 30, fixed: 28, fixRate: 93.3, lines: 61656, defectDensity: 0.05},
                {name: '李楠', produced: 23, fixed: 49, fixRate: 213.0, lines: 4323, defectDensity: 0.53},
                {name: '吴一凡', produced: 22, fixed: 27, fixRate: 122.7, lines: 2671, defectDensity: 0.82},
                {name: '朱叶贤', produced: 21, fixed: 32, fixRate: 152.4, lines: 25153, defectDensity: 0.08},
                {name: '詹婉晶', produced: 18, fixed: 17, fixRate: 94.4, lines: 74341, defectDensity: 0.02},
                {name: '庞林', produced: 16, fixed: 21, fixRate: 131.3, lines: 0, defectDensity: 0},
                {name: '缪捷丞', produced: 15, fixed: 16, fixRate: 106.7, lines: 8460, defectDensity: 0.18},
                {name: '陈彬', produced: 12, fixed: 15, fixRate: 125.0, lines: 16143, defectDensity: 0.07},
                {name: '曾志翔', produced: 12, fixed: 21, fixRate: 175.0, lines: 39562, defectDensity: 0.03},
                {name: '黄金潮', produced: 10, fixed: 14, fixRate: 140.0, lines: 35370, defectDensity: 0.03},
                {name: '宁波', produced: 8, fixed: 9, fixRate: 112.5, lines: 769, defectDensity: 1.04},
                {name: '易锋华', produced: 6, fixed: 0, fixRate: 0, lines: 5763, defectDensity: 0.10},
                {name: '凌亮正', produced: 5, fixed: 6, fixRate: 120.0, lines: 90727, defectDensity: 0.01},
                {name: '刘冰', produced: 5, fixed: 6, fixRate: 120.0, lines: 0, defectDensity: 0},
                {name: '邹文杰', produced: 3, fixed: 3, fixRate: 100.0, lines: 5831, defectDensity: 0.05},
                {name: '夏佳兴', produced: 3, fixed: 5, fixRate: 166.7, lines: 16829, defectDensity: 0.02},
                {name: '杨惠影', produced: 1, fixed: 1, fixRate: 100.0, lines: 0, defectDensity: 0},
                {name: '原杨帆', produced: 1, fixed: 0, fixRate: 0, lines: 0, defectDensity: 0},
                {name: '陈莉莉', produced: 1, fixed: 1, fixRate: 100.0, lines: 0, defectDensity: 0},
                {name: '钟义勇', produced: 1, fixed: 1, fixRate: 100.0, lines: 194, defectDensity: 0.52},
                {name: '许文通', produced: 0, fixed: 1, fixRate: 0, lines: 0, defectDensity: 0},
                {name: '林群', produced: 0, fixed: 3, fixRate: 0, lines: 7338, defectDensity: 0},
                {name: '洪伟强', produced: 0, fixed: 0, fixRate: 0, lines: 1214, defectDensity: 0},
                {name: '黄永富', produced: 0, fixed: 0, fixRate: 0, lines: 21437, defectDensity: 0},
                {name: '张沧海', produced: 0, fixed: 0, fixRate: 0, lines: 0, defectDensity: 0},
                {name: '樊韬', produced: 0, fixed: 0, fixRate: 0, lines: 2742, defectDensity: 0},
                {name: '陆雯艳', produced: 0, fixed: 0, fixRate: 0, lines: 0, defectDensity: 0},
                {name: 'Administrator', produced: 0, fixed: 0, fixRate: 0, lines: 22, defectDensity: 0}
            ],
            
            // 部门数据
            departments: [
                {name: '研发一部', bugs: 154, staff: 13, totalHours: 1081.6, avgDefectRate: 0.58, avgHours: 83.2, avgCommits: 108.5, avgLines: 27868.5, qualityRating: 'B'},
                {name: '研发二部', bugs: 200, staff: 15, totalHours: 1267.5, avgDefectRate: 1.21, avgHours: 84.5, avgCommits: 102.7, avgLines: 19223.2, qualityRating: 'C'}
            ]
        };

        // 初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            // 1. 各部门工时效率对比
            initDepartmentHoursChart();
            
            // 2. 个人工时投入比分析
            initPersonalHoursRatioChart();
            
            // 3. 代码产出分布
            initCodeOutputDistributionChart();
            
            // 4. 工时投入正态分布分析
            initHoursNormalDistributionChart();
            
            // 5. 缺陷分布与修复情况
            initDefectDistributionChart();
            
            // 6. 缺陷修复率分析
            initDefectFixRateChart();
            
            // 7. 缺陷状态分布
            initDefectStatusChart();
            
            // 8. 代码质量与缺陷关系
            initQualityDefectRelationshipChart();
            
            // 9. 测试覆盖情况
            initTestCoverageChart();
            
            // 10. 缺陷密度正态分布分析
            initDefectDensityNormalDistributionChart();
            
            // 11. 部门效能综合对比
            initDepartmentPerformanceChart();
            
            // 12. 部门人均效能对比
            initDepartmentRadarChart();
        });

        // 1. 各部门工时效率对比
        function initDepartmentHoursChart() {
            const ctx = document.getElementById('hoursEfficiencyChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.departments.map(d => d.name),
                    datasets: [
                        {
                            label: '人均工时(h)',
                            data: data.departments.map(d => d.avgHours),
                            backgroundColor: '#4CAF50',
                            borderColor: '#388E3C',
                            borderWidth: 1
                        },
                        {
                            label: '人均提交',
                            data: data.departments.map(d => d.avgCommits),
                            backgroundColor: '#2196F3',
                            borderColor: '#1976D2',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '各部门工时效率对比'
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 120, // 固定Y轴范围
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
        }

        // 2. 个人工时投入比分析
        function initPersonalHoursRatioChart() {
            // 按投入比从高到低排序
            const sortedData = [...data.personalHours].sort((a, b) => b.ratio - a.ratio);
            
            const ctx = document.getElementById('personalHoursRatioChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedData.map(d => d.name),
                    datasets: [{
                        label: '工时投入比(%)',
                        data: sortedData.map(d => d.ratio),
                        backgroundColor: function(context) {
                            const value = context.dataset.data[context.dataIndex];
                            // 标注异常值（>300%）
                            if (value > 300) {
                                return '#E91E63'; // 红色表示异常高
                            } else if (value < 80) {
                                return '#FF9800'; // 橙色表示异常低
                            }
                            return '#2196F3';
                        },
                        borderColor: '#1976D2',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '个人工时投入比分析（从高到低排序）'
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 1500, // 固定Y轴范围
                            ticks: {
                                stepSize: 300
                            }
                        }
                    }
                }
            });
        }

        // 3. 代码产出分布
        function initCodeOutputDistributionChart() {
            // 按变更行数从大到小排序
            const sortedData = [...data.codeOutput].sort((a, b) => b.lines - a.lines);
            
            const ctx = document.getElementById('codeOutputDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: sortedData.map(d => d.name),
                    datasets: [{
                        data: sortedData.map(d => d.lines),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40',
                            '#C9CBCF', '#7CFC00', '#FF1493', '#00BFFF', '#FFD700', '#8A2BE2',
                            '#FF4500', '#32CD32', '#00CED1', '#FF69B4', '#7B68EE', '#3CB371',
                            '#FF8C00', '#4169E1', '#ADFF2F', '#FF6347', '#7FFFD4', '#DA70D6',
                            '#FF7F50'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '代码产出分布（按变更行数从大到小排序）'
                        },
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // 4. 工时投入正态分布分析
        function initHoursNormalDistributionChart() {
            // 计算工时投入比的均值和标准差
            const ratios = data.personalHours.map(d => d.ratio).filter(r => r > 0);
            const mean = ratios.reduce((sum, val) => sum + val, 0) / ratios.length;
            const variance = ratios.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / ratios.length;
            const stdDev = Math.sqrt(variance);
            
            // 创建直方图数据
            const binCount = 10;
            const minVal = Math.min(...ratios);
            const maxVal = Math.max(...ratios);
            const binWidth = (maxVal - minVal) / binCount;
            
            const bins = Array(binCount).fill(0);
            const binLabels = [];
            for (let i = 0; i < binCount; i++) {
                binLabels.push((minVal + i * binWidth).toFixed(0));
            }
            
            ratios.forEach(ratio => {
                const binIndex = Math.min(Math.floor((ratio - minVal) / binWidth), binCount - 1);
                bins[binIndex]++;
            });
            
            // 生成正态分布曲线数据
            const normalCurve = [];
            const step = (maxVal - minVal) / 100;
            for (let x = minVal; x <= maxVal; x += step) {
                const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                         Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));
                normalCurve.push({x: x, y: y * ratios.length * binWidth});
            }
            
            const ctx = document.getElementById('hoursNormalDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: binLabels,
                    datasets: [
                        {
                            label: '实际分布',
                            data: bins,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '正态分布曲线',
                            type: 'line',
                            data: normalCurve,
                            fill: false,
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `工时投入正态分布分析（均值: ${mean.toFixed(1)}%, 标准差: ${stdDev.toFixed(1)}%）`
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: Math.max(...bins) * 1.2,
                            ticks: {
                                stepSize: 2
                            }
                        }
                    }
                }
            });
        }

        // 5. 缺陷分布与修复情况
        function initDefectDistributionChart() {
            const ctx = document.getElementById('defectDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.defects.map(d => d.name),
                    datasets: [
                        {
                            label: '产生Bug数',
                            data: data.defects.map(d => d.produced),
                            backgroundColor: '#FF6384',
                            borderColor: '#FF6384',
                            borderWidth: 1
                        },
                        {
                            label: '修复Bug数',
                            data: data.defects.map(d => d.fixed),
                            backgroundColor: '#36A2EB',
                            borderColor: '#36A2EB',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '缺陷分布与修复情况'
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 80, // 固定Y轴范围
                            ticks: {
                                stepSize: 10
                            }
                        }
                    }
                }
            });
        }

        // 6. 缺陷修复率分析
        function initDefectFixRateChart() {
            // 按修复率从高到低排序，过滤掉无修复率的数据
            const filteredData = data.defects.filter(d => d.fixRate > 0 && !isNaN(d.fixRate));
            const sortedData = [...filteredData].sort((a, b) => b.fixRate - a.fixRate);
            
            const ctx = document.getElementById('defectFixRateChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedData.map(d => d.name),
                    datasets: [{
                        label: '缺陷修复率(%)',
                        data: sortedData.map(d => d.fixRate),
                        backgroundColor: function(context) {
                            const value = context.dataset.data[context.dataIndex];
                            // 标注异常值
                            if (value > 200) {
                                return '#4CAF50'; // 绿色表示优秀
                            } else if (value < 60) {
                                return '#F44336'; // 红色表示需要改进
                            }
                            return '#2196F3';
                        },
                        borderColor: '#1976D2',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '缺陷修复率分析（从高到低排序）'
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 250, // 固定Y轴范围
                            ticks: {
                                stepSize: 50
                            }
                        }
                    }
                }
            });
        }

        // 7. 缺陷状态分布
        function initDefectStatusChart() {
            // 计算缺陷状态
            const totalBugs = 421;
            const fixedBugs = data.defects.reduce((sum, d) => sum + d.fixed, 0);
            const openBugs = totalBugs - fixedBugs;
            
            const ctx = document.getElementById('defectStatusChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['已修复', '待修复'],
                    datasets: [{
                        data: [fixedBugs, openBugs],
                        backgroundColor: ['#4CAF50', '#FF9800'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '缺陷状态分布'
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // 8. 代码质量与缺陷关系
        function initQualityDefectRelationshipChart() {
            // 准备散点图数据，过滤掉无缺陷密度的数据
            const scatterData = data.defects
                .filter(d => d.defectDensity > 0 && d.lines > 0)
                .map(d => ({
                    x: d.lines,
                    y: d.defectDensity,
                    name: d.name
                }));
            
            const ctx = document.getElementById('qualityDefectRelationshipChart').getContext('2d');
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '代码质量与缺陷关系',
                        data: scatterData,
                        backgroundColor: function(context) {
                            const value = context.dataset.data[context.dataIndex].y;
                            // 标注离群点（缺陷密度>0.8）
                            if (value > 0.8) {
                                return '#F44336'; // 红色表示高风险
                            } else if (value < 0.1) {
                                return '#4CAF50'; // 绿色表示高质量
                            }
                            return '#2196F3';
                        },
                        borderColor: '#1976D2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '代码质量与缺陷关系（X轴:变更行数, Y轴:每百行缺陷率）'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw.name}: 变更${context.raw.x.toLocaleString()}行, 缺陷率${context.raw.y}/百行`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '变更行数'
                            },
                            beginAtZero: true,
                            max: 100000
                        },
                        y: {
                            title: {
                                display: true,
                                text: '每百行缺陷率'
                            },
                            beginAtZero: true,
                            max: 1.2
                        }
                    }
                }
            });
        }

        // 9. 测试覆盖情况
        function initTestCoverageChart() {
            const ctx = document.getElementById('testCoverageChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['已执行', '未执行'],
                    datasets: [{
                        data: [92.6, 7.4],
                        backgroundColor: ['#4CAF50', '#F44336'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '测试覆盖情况'
                        },
                        legend: {
                            position: 'bottom'
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // 10. 缺陷密度正态分布分析
        function initDefectDensityNormalDistributionChart() {
            // 计算缺陷密度的均值和标准差，过滤掉无缺陷密度的数据
            const densities = data.defects
                .filter(d => d.defectDensity > 0)
                .map(d => d.defectDensity);
            const mean = densities.reduce((sum, val) => sum + val, 0) / densities.length;
            const variance = densities.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / densities.length;
            const stdDev = Math.sqrt(variance);
            
            // 创建直方图数据
            const binCount = 8;
            const minVal = Math.min(...densities);
            const maxVal = Math.max(...densities);
            const binWidth = (maxVal - minVal) / binCount;
            
            const bins = Array(binCount).fill(0);
            const binLabels = [];
            for (let i = 0; i < binCount; i++) {
                binLabels.push((minVal + i * binWidth).toFixed(2));
            }
            
            densities.forEach(density => {
                const binIndex = Math.min(Math.floor((density - minVal) / binWidth), binCount - 1);
                bins[binIndex]++;
            });
            
            // 生成正态分布曲线数据
            const normalCurve = [];
            const step = (maxVal - minVal) / 100;
            for (let x = minVal; x <= maxVal; x += step) {
                const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                         Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));
                normalCurve.push({x: x, y: y * densities.length * binWidth});
            }
            
            const ctx = document.getElementById('defectDensityNormalDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: binLabels,
                    datasets: [
                        {
                            label: '实际分布',
                            data: bins,
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '正态分布曲线',
                            type: 'line',
                            data: normalCurve,
                            fill: false,
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `缺陷密度正态分布分析（均值: ${mean.toFixed(3)}/百行, 标准差: ${stdDev.toFixed(3)}/百行）`
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: Math.max(...bins) * 1.2,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        // 11. 部门效能综合对比
        function initDepartmentPerformanceChart() {
            const ctx = document.getElementById('departmentPerformanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.departments.map(d => d.name),
                    datasets: [
                        {
                            label: '人均Bug数',
                            data: data.departments.map(d => d.bugs / d.staff),
                            backgroundColor: '#FF6384',
                            borderColor: '#FF6384',
                            borderWidth: 1
                        },
                        {
                            label: '人均变更行',
                            data: data.departments.map(d => d.avgLines / 1000), // 除以1000便于显示
                            backgroundColor: '#36A2EB',
                            borderColor: '#36A2EB',
                            borderWidth: 1
                        },
                        {
                            label: '平均缺陷率(%)',
                            data: data.departments.map(d => d.avgDefectRate),
                            backgroundColor: '#FFCE56',
                            borderColor: '#FFCE56',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '部门效能综合对比'
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 30, // 固定Y轴范围
                            ticks: {
                                stepSize: 5
                            }
                        }
                    }
                }
            });
        }

        // 12. 部门人均效能对比
        function initDepartmentRadarChart() {
            const ctx = document.getElementById('departmentRadarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['人均工时(h)', '人均提交', '人均变更行(千)', '缺陷率(%)', 'Bug数/人'],
                    datasets: [
                        {
                            label: '研发一部',
                            data: [
                                data.departments[0].avgHours, 
                                data.departments[0].avgCommits, 
                                data.departments[0].avgLines / 1000, 
                                data.departments[0].avgDefectRate, 
                                data.departments[0].bugs / data.departments[0].staff
                            ],
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2
                        },
                        {
                            label: '研发二部',
                            data: [
                                data.departments[1].avgHours, 
                                data.departments[1].avgCommits, 
                                data.departments[1].avgLines / 1000, 
                                data.departments[1].avgDefectRate, 
                                data.departments[1].bugs / data.departments[1].staff
                            ],
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '部门人均效能对比'
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 20
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
```